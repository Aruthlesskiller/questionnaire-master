(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[5382],{87588:function(R,E,e){"use strict";var Z=e(28991),C=e(67294),u=e(61144),f=e(27029),p=function(x,D){return C.createElement(f.Z,(0,Z.Z)((0,Z.Z)({},x),{},{ref:D,icon:u.Z}))};p.displayName="ExclamationCircleOutlined",E.Z=C.forwardRef(p)},59686:function(R,E,e){"use strict";e.r(E),e.d(E,{default:function(){return N}});var Z=e(57663),C=e(71577),u=e(39428),f=e(3182),p=e(34792),S=e(48086),x=e(71194),D=e(50146),A=e(94657),j=e(3980),B=e(87588),I=e(51042),L=e(36450),M=e(16894),g=e(80582),P=e(67294),T=e(11849),o=e(21307),n=e(85893),U=(0,g.Pi)(function(i){var m=i.onOk,y=i.onClose,r=i.position,d=(0,P.useRef)(),c=!!(r!=null&&r.id),F=(0,j.m2)();return(0,n.jsxs)(o.aN,{title:c?r!=null&&r.id?"\u4FEE\u6539\u5C97\u4F4D":"\u65B0\u589E\u5C97\u4F4D":"\u67E5\u770B\u5C97\u4F4D",formRef:d,visible:!0,initialValues:r,drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){y()}},onFinish:function(){var s=(0,f.Z)((0,u.Z)().mark(function t(a){var h;return(0,u.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,F.saveOrUpdatePosition((0,T.Z)((0,T.Z)({},r),a));case 2:h=l.sent,h.success&&m();case 4:case"end":return l.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),children:[(0,n.jsxs)(o.ZP.Group,{children:[(0,n.jsx)(o.V,{name:"name",width:"md",label:"\u5C97\u4F4D\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u540D\u79F0",required:!0,rules:[{required:!0,message:"\u5C97\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,n.jsx)(o.V,{width:"md",name:"code",label:"\u5C97\u4F4D\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u7F16\u7801",rules:[{required:!0,message:"\u5C97\u4F4D\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"}],required:!0})]}),(0,n.jsx)(o.ZP.Group,{children:(0,n.jsx)(o._I,{width:"md",request:(0,f.Z)((0,u.Z)().mark(function s(){return(0,u.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",[{label:"\u672C\u4EBA",value:"SELF"},{label:"\u672C\u4EBA\u53CA\u4E0B\u5C5E",value:"SELF_AND_SUB"},{label:"\u672C\u90E8\u95E8",value:"DEPT"},{label:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8",value:"DEPT_AND_SUB"},{label:"\u5168\u90E8",value:"ALL"}]);case 1:case"end":return a.stop()}},s)})),name:"dataPermissionType",label:"\u6570\u636E\u6743\u9650"})})]})}),K=(0,g.Pi)(function(){var i=(0,j.m2)(),m=(0,P.useRef)(),y=(0,P.useState)(),r=(0,A.Z)(y,2),d=r[0],c=r[1];(0,P.useEffect)(function(){i.loadPermissions()},[i]);var F=[{title:"\u540D\u79F0",dataIndex:"name",ellipsis:!0},{title:"\u7F16\u7801",dataIndex:"code",hideInSearch:!0},{title:"\u6570\u636E\u6743\u9650",dataIndex:"dataPermissionType",valueEnum:{SELF:"\u672C\u4EBA",SELF_AND_SUB:"\u672C\u4EBA\u53CA\u4E0B\u5C5E",DEPT:"\u672C\u90E8\u95E8",DEPT_AND_SUB:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8",ALL:"\u5168\u90E8"},hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(t,a){return[(0,n.jsx)("a",{onClick:function(){c({visible:!0,current:a})},children:"\u7F16\u8F91"},"edit"),(0,n.jsx)("a",{onClick:function(){D.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u5C97\u4F4D?",icon:(0,n.jsx)(B.Z,{}),onOk:function(){i.deletePosition(a.id).then(function(l){if(l.success){var O;S.default.success("\u5220\u9664\u6210\u529F"),(O=m.current)===null||O===void 0||O.reload()}})}})},children:"\u5220\u9664"},"delte")]}}];return(0,n.jsxs)(L._z,{title:!1,children:[(0,n.jsx)(M.ZP,{columns:F,actionRef:m,bordered:!0,dataSource:i.positions,request:function(){var s=(0,f.Z)((0,u.Z)().mark(function t(a){return(0,u.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",i.loadPositions(a));case 1:case"end":return v.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),columnsState:{persistenceKey:"pro-table-singe-position",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:5},scroll:{x:650},dateFormatter:"string",headerTitle:"\u5C97\u4F4D\u5217\u8868",toolBarRender:function(){return[(0,n.jsx)(C.Z,{icon:(0,n.jsx)(I.Z,{}),type:"primary",onClick:function(){c({visible:!0})},children:"\u65B0\u5EFA"},"button")]}}),(d==null?void 0:d.visible)&&(0,n.jsx)(U,{onClose:function(){c(void 0)},onOk:function(){var t;c(void 0),(t=m.current)===null||t===void 0||t.reload()},position:d.current})]})}),N=K}}]);
