(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[346],{66023:function(de,W){"use strict";var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};W.Z=e},27029:function(de,W,e){"use strict";e.d(W,{Z:function(){return L}});var R=e(28991),C=e(28481),Q=e(96156),V=e(81253),T=e(67294),N=e(94184),j=e.n(N),k=e(63017),r=e(41755),ee=["icon","className","onClick","style","primaryColor","secondaryColor"],Z={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function oe(s){var y=s.primaryColor,E=s.secondaryColor;Z.primaryColor=y,Z.secondaryColor=E||(0,r.pw)(y),Z.calculated=!!E}function ve(){return(0,R.Z)({},Z)}var z=function(y){var E=y.icon,X=y.className,A=y.onClick,l=y.style,n=y.primaryColor,w=y.secondaryColor,a=(0,V.Z)(y,ee),o=Z;if(n&&(o={primaryColor:n,secondaryColor:w||(0,r.pw)(n)}),(0,r.C3)(),(0,r.Kp)((0,r.r)(E),"icon should be icon definiton, but got ".concat(E)),!(0,r.r)(E))return null;var c=E;return c&&typeof c.icon=="function"&&(c=(0,R.Z)((0,R.Z)({},c),{},{icon:c.icon(o.primaryColor,o.secondaryColor)})),(0,r.R_)(c.icon,"svg-".concat(c.name),(0,R.Z)({className:X,onClick:A,style:l,"data-icon":c.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},a))};z.displayName="IconReact",z.getTwoToneColors=ve,z.setTwoToneColors=oe;var g=z;function t(s){var y=(0,r.H9)(s),E=(0,C.Z)(y,2),X=E[0],A=E[1];return g.setTwoToneColors({primaryColor:X,secondaryColor:A})}function O(){var s=g.getTwoToneColors();return s.calculated?[s.primaryColor,s.secondaryColor]:s.primaryColor}var u=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];t("#1890ff");var p=T.forwardRef(function(s,y){var E,X=s.className,A=s.icon,l=s.spin,n=s.rotate,w=s.tabIndex,a=s.onClick,o=s.twoToneColor,c=(0,V.Z)(s,u),q=T.useContext(k.Z),_=q.prefixCls,F=_===void 0?"anticon":_,re=j()(F,(E={},(0,Q.Z)(E,"".concat(F,"-").concat(A.name),!!A.name),(0,Q.Z)(E,"".concat(F,"-spin"),!!l||A.name==="loading"),E),X),ne=w;ne===void 0&&a&&(ne=-1);var ue=n?{msTransform:"rotate(".concat(n,"deg)"),transform:"rotate(".concat(n,"deg)")}:void 0,m=(0,r.H9)(o),ce=(0,C.Z)(m,2),Y=ce[0],d=ce[1];return T.createElement("span",(0,R.Z)((0,R.Z)({role:"img","aria-label":A.name},c),{},{ref:y,tabIndex:ne,onClick:a,className:re}),T.createElement(g,{icon:A,primaryColor:Y,secondaryColor:d,style:ue}))});p.displayName="AntdIcon",p.getTwoToneColor=O,p.setTwoToneColor=t;var L=p},59271:function(de,W,e){"use strict";e.d(W,{Z:function(){return j}});var R=e(28991),C=e(67294),Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},V=Q,T=e(27029),N=function(r,ee){return C.createElement(T.Z,(0,R.Z)((0,R.Z)({},r),{},{ref:ee,icon:V}))};N.displayName="HomeOutlined";var j=C.forwardRef(N)},81262:function(){},18727:function(de,W,e){"use strict";e.r(W),e.d(W,{Practice:function(){return ce},default:function(){return Y}});var R=e(36017),C=e(35247),Q=e(71194),V=e(50146),T=e(11849),N=e(39428),j=e(3182),k=e(68068),r=e(9761),ee=e(1615),Z=e(67294),oe=e(5977);const ve="Left",z="Right",g="Up",t="Down",O={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:Infinity,touchEventOptions:{passive:!0}},u={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},p="mousemove",L="mouseup",s="touchend",y="touchmove",E="touchstart";function X(d,I,b,P){return d>I?b>0?z:ve:P>0?t:g}function A(d,I){if(I===0)return d;const b=Math.PI/180*I,P=d[0]*Math.cos(b)+d[1]*Math.sin(b),H=d[1]*Math.cos(b)-d[0]*Math.sin(b);return[P,H]}function l(d,I){const b=i=>{const f="touches"in i;f&&i.touches.length>1||d((h,S)=>{S.trackMouse&&!f&&(document.addEventListener(p,P),document.addEventListener(L,U));const{clientX:v,clientY:ae}=f?i.touches[0]:i,se=A([v,ae],S.rotationAngle);return S.onTouchStartOrOnMouseDown&&S.onTouchStartOrOnMouseDown({event:i}),Object.assign(Object.assign(Object.assign({},h),u),{initial:se.slice(),xy:se,start:i.timeStamp||0})})},P=i=>{d((f,h)=>{const S="touches"in i;if(S&&i.touches.length>1)return f;if(i.timeStamp-f.start>h.swipeDuration)return f.swiping?Object.assign(Object.assign({},f),{swiping:!1}):f;const{clientX:v,clientY:ae}=S?i.touches[0]:i,[se,he]=A([v,ae],h.rotationAngle),ge=se-f.xy[0],pe=he-f.xy[1],me=Math.abs(ge),K=Math.abs(pe),fe=(i.timeStamp||0)-f.start,Oe=Math.sqrt(me*me+K*K)/(fe||1),Se=[ge/(fe||1),pe/(fe||1)],we=X(me,K,ge,pe),Ee=typeof h.delta=="number"?h.delta:h.delta[we.toLowerCase()]||O.delta;if(me<Ee&&K<Ee&&!f.swiping)return f;const Ce={absX:me,absY:K,deltaX:ge,deltaY:pe,dir:we,event:i,first:f.first,initial:f.initial,velocity:Oe,vxvy:Se};Ce.first&&h.onSwipeStart&&h.onSwipeStart(Ce),h.onSwiping&&h.onSwiping(Ce);let je=!1;return(h.onSwiping||h.onSwiped||h[`onSwiped${we}`])&&(je=!0),je&&h.preventScrollOnSwipe&&h.trackTouch&&i.cancelable&&i.preventDefault(),Object.assign(Object.assign({},f),{first:!1,eventData:Ce,swiping:!0})})},H=i=>{d((f,h)=>{let S;if(f.swiping&&f.eventData){if(i.timeStamp-f.start<h.swipeDuration){S=Object.assign(Object.assign({},f.eventData),{event:i}),h.onSwiped&&h.onSwiped(S);const v=h[`onSwiped${S.dir}`];v&&v(S)}}else h.onTap&&h.onTap({event:i});return h.onTouchEndOrOnMouseUp&&h.onTouchEndOrOnMouseUp({event:i}),Object.assign(Object.assign(Object.assign({},f),u),{eventData:S})})},G=()=>{document.removeEventListener(p,P),document.removeEventListener(L,U)},U=i=>{G(),H(i)},$=(i,f)=>{let h=()=>{};if(i&&i.addEventListener){const S=Object.assign(Object.assign({},O.touchEventOptions),f.touchEventOptions),v=[[E,b,S],[y,P,Object.assign(Object.assign({},S),f.preventScrollOnSwipe?{passive:!1}:{})],[s,H,S]];v.forEach(([ae,se,he])=>i.addEventListener(ae,se,he)),h=()=>v.forEach(([ae,se])=>i.removeEventListener(ae,se))}return h},le={ref:i=>{i!==null&&d((f,h)=>{if(f.el===i)return f;const S={};return f.el&&f.el!==i&&f.cleanUpTouch&&(f.cleanUpTouch(),S.cleanUpTouch=void 0),h.trackTouch&&i&&(S.cleanUpTouch=$(i,h)),Object.assign(Object.assign(Object.assign({},f),{el:i}),S)})}};return I.trackMouse&&(le.onMouseDown=b),[le,$]}function n(d,I,b,P){return!I.trackTouch||!d.el?(d.cleanUpTouch&&d.cleanUpTouch(),Object.assign(Object.assign({},d),{cleanUpTouch:void 0})):d.cleanUpTouch?I.preventScrollOnSwipe!==b.preventScrollOnSwipe||I.touchEventOptions.passive!==b.touchEventOptions.passive?(d.cleanUpTouch(),Object.assign(Object.assign({},d),{cleanUpTouch:P(d.el,I)})):d:Object.assign(Object.assign({},d),{cleanUpTouch:P(d.el,I)})}function w(d){const{trackMouse:I}=d,b=Z.useRef(Object.assign({},u)),P=Z.useRef(Object.assign({},O)),H=Z.useRef(Object.assign({},P.current));H.current=Object.assign({},P.current),P.current=Object.assign(Object.assign({},O),d);let G;for(G in O)P.current[G]===void 0&&(P.current[G]=O[G]);const[U,$]=Z.useMemo(()=>l(te=>b.current=te(b.current,P.current),{trackMouse:I}),[I]);return b.current=n(b.current,P.current,H.current,$),U}var a=e(92725),o=e(12997),c=e(96389),q=e(42285),_=e(78210),F=e(3980),re=e(32235),ne=e(27400),ue=e(59271),m=e(85893),ce=(0,r.Pi)(function(){var d,I,b,P,H=(0,oe.UO)(),G=H.id,U=H.answerId,$=(0,oe.TH)(),te=$.query.preview==="1",le=$.query.pattern,i=$.query.openid,f=$.query.ptype,h=(0,Z.useMemo)(function(){return(0,c.SB)()},[]),S=(0,Z.useRef)(null),v=(0,Z.useMemo)(function(){return new re.b({surveyRef:S,id:"exercise",answerId:U,repoId:G,examExerciseType:f})},[S,G,U]),ae=(0,ne.a)();(0,Z.useEffect)(function(){ae.currentUser()},[ae]);var se=v.saving,he=v.loading,ge=(d=v.setting)===null||d===void 0?void 0:d.answerSetting,pe=v.loginRequired,me=v.verifying,K=ge||{},fe=K.autoSave,Oe=K.progressBar,Se=K.initialValues,we=K.questionNumber,Ee=K.wechatOnly,Ce=K.onePageOneQuestion,je=K.answerSheetVisible,Le=K.triggerType,Ue=K.copyEnabled,xe=((I=v.setting)===null||I===void 0?void 0:I.examSetting)||{},Ve=xe.exerciseMode,He=xe.maxSwitchScreenTimes,Ae=!!((b=v.setting)!==null&&b!==void 0&&(P=b.examSetting)!==null&&P!==void 0&&P.randomSurveyWrong),Be=v.errorMessage,Ie=v.savedAnswer,Me=v.confirmTempAnswerType,Ne=v.statistics,ye=v.survey,De=v.answerId,_e=v.mode,Te=v.success,Ze=(0,c.XO)(ye,$);(0,Z.useEffect)(function(){ye&&(0,c.iq)(ye,"statEnabled","quota")&&v.loadStatistics()},[ye,v]);var ze=w({onSwipedLeft:function(){var M;(M=S.current)===null||M===void 0||M.getStore().handleNext()},onSwipedRight:function(){var M;(M=S.current)===null||M===void 0||M.getStore().handlePrev()}}),ke=(0,Z.useCallback)(function(ie,M){Oe&&v.changeProgress(M),fe&&ie&&v.tempSave(ie)},[Oe]),$e=function(){return(0,m.jsx)(o.BW,{})},Re=function(M){var D,x;return(0,m.jsxs)("div",{className:"render-failure ".concat(h?"mobile":"phone"),children:[((D=v.project)===null||D===void 0?void 0:D.name)&&(0,m.jsx)("div",{className:"title",children:(x=v.project)===null||x===void 0?void 0:x.name}),(0,m.jsxs)("div",{className:"content",children:[(0,m.jsx)("div",{children:(0,m.jsx)(o.AT,{})}),(0,m.jsx)("h2",{children:Be||M}),(0,m.jsx)("div",{children:"\u611F\u8C22\u5173\u6CE8\uFF01"})]})]})},We=function(){if(Te)return(0,m.jsx)(m.Fragment,{});if(he)return(0,m.jsx)(a.Z,{});if(v.errorCode!==200)return Re();if(Ee&&!(0,c.CL)())return Re("\u53EA\u80FD\u5728\u5FAE\u4FE1\u4E2D\u6253\u5F00");if(pe)return(0,m.jsx)("div",{children:$e()});if(ye&&!Te&&!me)return Me===1&&fe&&_e==="survey"&&!De?(0,m.jsx)(o.oq,{}):(0,m.jsx)("div",{style:{userSelect:Ue===!1?"none":"unset"},children:(0,m.jsx)(k.Z,{ref:S,mode:_e,loading:se||he,progressBar:Oe,questionNumber:we,theme:h?"antdMobile":"antd",schema:ye,onChange:ke,onePageOneQuestion:!0,answerSheetVisible:!0,exerciseMode:!0,wrongMode:Ae,pattern:le,triggerType:Le,onInit:function(D){v.tempSave(D.values)},initialQuestionScore:v.initialQuestionScore,onDictSearch:function(){var M=(0,j.Z)((0,N.Z)().mark(function D(x){var J;return(0,N.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,F.hi.loadDict(x);case 2:if(J=B.sent,!J.success){B.next=5;break}return B.abrupt("return",J.data);case 5:return B.abrupt("return",[]);case 6:case"end":return B.stop()}},D)}));return function(D){return M.apply(this,arguments)}}(),initialValues:Me===3?Ze:(0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)({},Se),fe?Ie==null?void 0:Ie.answer:{}),Ze),v.values),statistics:Ne,onUpload:function(D,x){return v.upload(D,x)},footerVisible:!(te||le==="readPretty"),headerVisible:!te,isPreview:te,onLink:function(D){F.hi.loadLinkResult((0,T.Z)((0,T.Z)({},D),{},{projectId:G})).then(function(x){if(x.success&&x.data.answer){var J=x.data.answer;Object.keys(J).forEach(function(be){var B=J[be];if(D.questionId!==be){var Pe;(Pe=S.current)===null||Pe===void 0||Pe.setValue(be,B)}})}})},onSubmit:function(D){v.saveData((0,T.Z)((0,T.Z)({},D),{},{openid:i}),{answerId:De}).then(function(x){!(x!=null&&x.success)&&x!==null&&x!==void 0&&x.message&&(h?ee.u_.alert({title:"\u4FDD\u5B58\u5931\u8D25",content:(0,m.jsx)(_.Z,{html:x.message})}):V.Z.error({title:"\u4FDD\u5B58\u5931\u8D25",content:(0,m.jsx)(_.Z,{html:x.message}),okText:"\u77E5\u9053\u4E86"}))})},onNote:function(D,x){F.hi.updateUserBook({templateId:D,note:x})},onLazyLoad:function(){var M=(0,j.Z)((0,N.Z)().mark(function D(x){var J;return(0,N.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,F.hi.getTemplate({id:x});case 2:return J=B.sent,B.abrupt("return",(0,T.Z)((0,T.Z)({},J),{},{schema:J==null?void 0:J.template}));case 4:case"end":return B.stop()}},D)}));return function(D){return M.apply(this,arguments)}}()})})};(0,Z.useEffect)(function(){Te&&q.m8.push("/exercise")},[Te]);var Ke=function(){var M,D,x=(M=v.survey)===null||M===void 0||(D=M.attribute)===null||D===void 0?void 0:D.backgroundImage;if(x)return{backgroundImage:"url(/api/public/preview/".concat(x,")")}};return(0,m.jsxs)(c.ff.Provider,{value:v,children:[(0,m.jsx)("div",{style:{padding:20},children:(0,m.jsxs)(C.Z,{children:[(0,m.jsxs)(C.Z.Item,{onClick:function(){return q.m8.push("/")},children:[(0,m.jsx)(ue.Z,{}),"\u9996\u9875"]}),(0,m.jsx)(C.Z.Item,{onClick:function(){return q.m8.push("/exercise")},children:"\u5728\u7EBF\u7EC3\u4E60"})]})}),(0,m.jsx)("div",{className:"survey ".concat(h?"mobile":"pc"),style:Ke(),children:We()})]})}),Y=function(){var d=(0,oe.UO)(),I=d.id,b=I===void 0?"":I,P=d.answerId;return(0,m.jsx)(ce,{id:b,aId:P})}},32235:function(de,W,e){"use strict";e.d(W,{b:function(){return ve}});var R=e(11849),C=e(39428),Q=e(34792),V=e(48086),T=e(3182),N=e(69610),j=e(54941),k=e(3980),r=e(54531),ee=e(36855),Z=e(42238),oe=e.n(Z),ve=function(){function z(g){var t;(0,N.Z)(this,z),this.id=void 0,this.project=void 0,this.survey=void 0,this.loading=void 0,this.verifying=!1,this.saving=!1,this.isPC=void 0,this.errorCode=void 0,this.errorMessage=void 0,this.progress=0,this.confirmTempAnswerType=0,this.statistics=void 0,this.answerUrl=void 0,this.answerQrCodeUrl=void 0,this.loginRequired=void 0,this.whitelistName=void 0,this.success=void 0,this.answerId=void 0,this.repoId=void 0,this.examExerciseType=void 0,this.answerView=void 0,this.values=void 0,this.initialQuestionScore=void 0,this.openId=void 0,this.token=void 0,this.surveyRef=void 0,this.id=g.id,this.answerId=g.answerId,this.surveyRef=g.surveyRef,this.repoId=g.repoId,this.examExerciseType=g.examExerciseType;var O=ee.parse(window.location.search);O&&(this.openId=O.openId,this.token=O["sk-token"]),this.makeObservable(),this.loadProject(),this.confirmTempAnswerType=(t=this.savedAnswer)!==null&&t!==void 0&&t.progress?1:0}return(0,j.Z)(z,[{key:"makeObservable",value:function(){(0,r.Ou)(this,{id:r.LO.ref,answerId:r.LO.ref,survey:r.LO.ref,loading:r.LO.ref,saving:r.LO.ref,verifying:r.LO.ref,project:r.LO.ref,errorCode:r.LO.ref,errorMessage:r.LO.ref,progress:r.LO.ref,confirmTempAnswerType:r.LO.ref,statistics:r.LO.ref,answerUrl:r.LO.ref,answerQrCodeUrl:r.LO.ref,success:r.LO.ref,answerView:r.LO.ref,values:r.LO.ref,loginRequired:r.LO.ref,whitelistName:r.LO.ref,openId:r.LO.ref,token:r.LO.ref,passwordRequired:r.LO.computed,mode:r.LO.computed,tempSaveId:r.LO.computed,status:r.LO.computed,setting:r.LO.computed,tempSave:r.aD,saveData:r.aD,loadProject:r.aD,changeProgress:r.aD,validate:r.aD})}},{key:"setting",get:function(){var t;return(t=this.project)===null||t===void 0?void 0:t.setting}},{key:"status",get:function(){var t;return(t=this.project)===null||t===void 0?void 0:t.status}},{key:"passwordRequired",get:function(){var t;return(t=this.project)===null||t===void 0?void 0:t.passwordRequired}},{key:"mode",get:function(){var t;return(t=this.project)===null||t===void 0?void 0:t.mode}},{key:"tempSaveId",get:function(){return"savedAnswer-"+this.id}},{key:"savedAnswer",get:function(){var t=localStorage.getItem(this.tempSaveId);return t&&JSON.parse(t)}},{key:"startTime",get:function(){var t,O,u;return((t=this.savedAnswer)===null||t===void 0||(O=t.metaInfo)===null||O===void 0||(u=O.answerInfo)===null||u===void 0?void 0:u.startTime)||new Date().getTime()}},{key:"tempSave",value:function(t){var O=localStorage.getItem(this.tempSaveId),u;O?(u=JSON.parse(O),u.answer=t,u.progress=this.progress):u={answer:t,metaInfo:{answerInfo:{startTime:new Date().getTime()}},progress:this.progress},localStorage.setItem(this.tempSaveId,JSON.stringify(u))}},{key:"saveData",value:function(){var g=(0,T.Z)((0,C.Z)().mark(function O(u,p){var L,s,y=this,E,X,A,l,n,w,a,o,c;return(0,C.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(E=p||{},X=E.answerId,A=E.forceSubmit,this.saving=!0,l=new(oe())().getResult(),n={answer:u,projectId:this.id,metaInfo:{answerInfo:{startTime:this.startTime,endTime:new Date().getTime()},clientInfo:{browser:l.browser.name||"",browserVersion:l.browser.version||"",deviceType:l.device.type||"",platform:l.os.name||"",platformVersion:l.os.version||""}},id:X||this.answerId,whitelistName:this.whitelistName},w=this.startTime,a=((L=this.project)===null||L===void 0||(s=L.setting.examSetting)===null||s===void 0?void 0:s.minSubmitMinutes)||0,o=w+a*60*1e3,!(a>0&&new Date().getTime()<o&&A!==!0)){_.next=11;break}return V.default.error("\u672A\u5230\u4EA4\u5377\u65F6\u95F4"),this.saving=!1,_.abrupt("return");case 11:return _.next=13,k.hi.post(this.getUrlWithToken("/api/public/saveAnswer"),n);case 13:return c=_.sent,(0,r.aD)(function(){c.success&&(c.data.answerId?y.answerId=c.data.answerId:c.data.examScore!==void 0,y.answerView=c.data,y.values=u,y.success=!0,localStorage.removeItem(y.tempSaveId)),y.saving=!1}),_.abrupt("return",c);case 16:case"end":return _.stop()}},O,this)}));function t(O,u){return g.apply(this,arguments)}return t}()},{key:"loadStatistics",value:function(){var g=(0,T.Z)((0,C.Z)().mark(function O(){var u=this,p;return(0,C.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.loading){s.next=2;break}return s.abrupt("return");case 2:return this.loading=!0,s.next=5,k.hi.post(this.getUrlWithToken("/api/public/statistics"),{id:this.id});case 5:p=s.sent,(0,r.aD)(function(){p.success&&(u.statistics=p.data),u.loading=!1});case 7:case"end":return s.stop()}},O,this)}));function t(){return g.apply(this,arguments)}return t}()},{key:"loadProject",value:function(){var g=(0,T.Z)((0,C.Z)().mark(function O(){var u=this,p;return(0,C.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.loading=!0,s.next=3,k.hi.post(this.getUrlWithToken("/api/public/loadProject"),{id:this.id,answerId:this.answerId,repoId:this.repoId,examExerciseType:this.examExerciseType});case 3:p=s.sent,(0,r.aD)(function(){if(p.success){var y;u.project=p.data,u.loginRequired=p.data.loginRequired,u.initialQuestionScore=(y=p.data.examInfo)===null||y===void 0?void 0:y.questionScore,u.survey=p.data.survey,u.values=p.data.answer,p.data.answerId&&(u.answerId=p.data.answerId)}else u.errorMessage=p.message;u.errorCode=p.code,u.loading=!1});case 5:case"end":return s.stop()}},O,this)}));function t(){return g.apply(this,arguments)}return t}()},{key:"validate",value:function(){var g=(0,T.Z)((0,C.Z)().mark(function O(u){var p=this,L;return(0,C.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.verifying=!0,y.next=3,k.hi.post(this.getUrlWithToken("/api/public/validateProject"),{id:this.id,answer:u,answerId:this.answerId});case 3:L=y.sent,(0,r.aD)(function(){if(L.success){var E;p.project=L.data,p.loginRequired=!1,p.survey=L.data.survey,p.whitelistName=(E=u.whitelistName)===null||E===void 0?void 0:E.whitelistName}else V.default.error(L.message);p.verifying=!1});case 5:case"end":return y.stop()}},O,this)}));function t(O){return g.apply(this,arguments)}return t}()},{key:"upload",value:function(){var g=(0,T.Z)((0,C.Z)().mark(function O(u,p){return(0,C.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",k.hi.upload("/api/public/upload",(0,R.Z)({fileType:4,basePath:this.id},u),p));case 1:case"end":return s.stop()}},O,this)}));function t(O,u){return g.apply(this,arguments)}return t}()},{key:"changeProgress",value:function(t){this.progress=t}},{key:"getUrlWithToken",value:function(t){return ee.stringifyUrl({url:t,query:{"sk-token":this.token}})}}]),z}()},35247:function(de,W,e){"use strict";e.d(W,{Z:function(){return A}});var R=e(96156),C=e(22122),Q=e(85061),V=e(94184),T=e.n(V),N=e(50344),j=e(67294),k=e(53124),r=e(28682),ee=e(96159),Z=e(13622),oe=e(81555),ve=function(l,n){var w={};for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&n.indexOf(a)<0&&(w[a]=l[a]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(l);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(l,a[o])&&(w[a[o]]=l[a[o]]);return w},z=function(n){var w=n.prefixCls,a=n.separator,o=a===void 0?"/":a,c=n.children,q=n.menu,_=n.overlay,F=n.dropdownProps,re=ve(n,["prefixCls","separator","children","menu","overlay","dropdownProps"]),ne=j.useContext(k.E_),ue=ne.getPrefixCls,m=ue("breadcrumb",w),ce=function(I){if(q||_){var b=(0,C.Z)({},F);return"overlay"in n&&(b.overlay=_),j.createElement(oe.Z,(0,C.Z)({menu:q,placement:"bottom"},b),j.createElement("span",{className:"".concat(m,"-overlay-link")},I,j.createElement(Z.Z,null)))}return I},Y;return"href"in re?Y=j.createElement("a",(0,C.Z)({className:"".concat(m,"-link")},re),c):Y=j.createElement("span",(0,C.Z)({className:"".concat(m,"-link")},re),c),Y=ce(Y),c!=null?j.createElement("li",null,Y,o&&j.createElement("span",{className:"".concat(m,"-separator")},o)):null};z.__ANT_BREADCRUMB_ITEM=!0;var g=z,t=function(n){var w=n.children,a=j.useContext(k.E_),o=a.getPrefixCls,c=o("breadcrumb");return j.createElement("span",{className:"".concat(c,"-separator")},w||"/")};t.__ANT_BREADCRUMB_SEPARATOR=!0;var O=t,u=function(l,n){var w={};for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&n.indexOf(a)<0&&(w[a]=l[a]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(l);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(l,a[o])&&(w[a[o]]=l[a[o]]);return w};function p(l,n){if(!l.breadcrumbName)return null;var w=Object.keys(n).join("|"),a=l.breadcrumbName.replace(new RegExp(":(".concat(w,")"),"g"),function(o,c){return n[c]||o});return a}function L(l,n,w,a){var o=w.indexOf(l)===w.length-1,c=p(l,n);return o?j.createElement("span",null,c):j.createElement("a",{href:"#/".concat(a.join("/"))},c)}var s=function(n,w){return n=(n||"").replace(/^\//,""),Object.keys(w).forEach(function(a){n=n.replace(":".concat(a),w[a])}),n},y=function(n,w,a){var o=(0,Q.Z)(n),c=s(w||"",a);return c&&o.push(c),o},E=function(n){var w=n.prefixCls,a=n.separator,o=a===void 0?"/":a,c=n.style,q=n.className,_=n.routes,F=n.children,re=n.itemRender,ne=re===void 0?L:re,ue=n.params,m=ue===void 0?{}:ue,ce=u(n,["prefixCls","separator","style","className","routes","children","itemRender","params"]),Y=j.useContext(k.E_),d=Y.getPrefixCls,I=Y.direction,b,P=d("breadcrumb",w);if(_&&_.length>0){var H=[];b=_.map(function(U){var $=s(U.path,m);$&&H.push($);var te;U.children&&U.children.length&&(te=j.createElement(r.Z,{items:U.children.map(function(i){return{key:i.path||i.breadcrumbName,label:ne(i,m,_,y(H,i.path,m))}})}));var le={separator:o};return te&&(le.overlay=te),j.createElement(g,(0,C.Z)({},le,{key:$||U.breadcrumbName}),ne(U,m,_,H))})}else F&&(b=(0,N.Z)(F).map(function(U,$){return U&&(0,ee.Tm)(U,{separator:o,key:$})}));var G=T()(P,(0,R.Z)({},"".concat(P,"-rtl"),I==="rtl"),q);return j.createElement("nav",(0,C.Z)({className:G,style:c},ce),j.createElement("ol",null,b))};E.Item=g,E.Separator=O;var X=E,A=X},36017:function(de,W,e){"use strict";var R=e(38663),C=e.n(R),Q=e(81262),V=e.n(Q),T=e(59250),N=e(30887)},13622:function(de,W,e){"use strict";var R=e(28991),C=e(67294),Q=e(66023),V=e(27713),T=function(k,r){return C.createElement(V.Z,(0,R.Z)((0,R.Z)({},k),{},{ref:r,icon:Q.Z}))},N=C.forwardRef(T);W.Z=N}}]);
