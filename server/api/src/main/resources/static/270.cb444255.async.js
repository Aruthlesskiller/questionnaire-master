(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[270],{38006:function(x){x.exports={linkGroup:"linkGroup___9Jgdb"}},9016:function(x){x.exports={activitiesList:"activitiesList___H8HBB",username:"username___2ciPn",event:"event___3yvwe",pageHeaderContent:"pageHeaderContent___PWSiu",avatar:"avatar___3ZBop",content:"content___1eLtZ",contentTitle:"contentTitle___Yu-cR",extraContent:"extraContent___3rMo7",statItem:"statItem___2hHyE",members:"members___1FE9G",member:"member___2ERhZ",projectList:"projectList___2xaJs",cardTitle:"cardTitle___Bli-X",projectGrid:"projectGrid___Bia9a",projectItemContent:"projectItemContent___3_r0i",datetime:"datetime___2UCoC",activeCard:"activeCard___10qJg",container:"container___1D3Yy"}},60438:function(x,j,t){"use strict";t.r(j),t.d(j,{default:function(){return _}});var ne=t(13062),A=t(71230),ae=t(58024),g=t(91894),re=t(89032),T=t(15746),se=t(54421),p=t(38272),N=t(94657),ie=t(95300),C=t(7277),le=t(94233),I=t(51890),oe=t(71748),Y=t(43574),E=t(67294),F=t(27400),D=t(36450),G=t(9761),P=t(30381),L=t.n(P),M=t(73727),z=t(38006),U=t.n(z),e=t(85893),Z=function(a){var n=a.links,i=a.linkElement,c=a.onAdd;return(0,e.jsx)("div",{className:U().linkGroup,children:n.map(function(s){return(0,E.createElement)(i,{key:"linkGroup-item-".concat(s.id||s.title),to:s.href,href:s.href},s.title)})})};Z.defaultProps={links:[],onAdd:function(){},linkElement:"a"};var R=Z,W=t(9016),l=t.n(W),de=t(18106),J=t(72488),H=t(39428),O=t(3182),ue=t(402),$=t(56118),B=t(3980),k=t(16894),K=t(27484),y=t.n(K),S=$.Z.Text,h=function(a){var n=a.mode,i=a.type,c=[{title:n==="exam"?"\u8003\u8BD5\u540D\u79F0":"\u95EE\u5377\u540D\u79F0",dataIndex:"name"},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"examStartTime",hideInTable:i==="history",renderText:function(o){return o?y()(o).format("YYYY-MM-DD HH:mm"):"-"}},{title:"\u5B8C\u6210\u72B6\u6001",dataIndex:"status",valueType:"select",hideInTable:i==="history",valueEnum:{0:{text:"\u672A\u5F00\u59CB",status:"Default"},1:{text:"\u8FDB\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u5B8C\u6210",status:"Success"}}},{title:"\u6211\u7684\u7B54\u9898\u65F6\u95F4",dataIndex:"answerTime",hideInTable:i!=="history",renderText:function(o,r){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{fontSize:12},children:y()(r.startTime).format("YYYY-MM-DD HH:mm:ss")}),(0,e.jsx)("div",{style:{fontSize:12,color:"#8c8c8c"},children:y()(r.endTime).format("YYYY-MM-DD HH:mm:ss")})]})}},{title:"\u6211\u7684\u7B54\u9898\u7528\u65F6",dataIndex:"totalTime",hideInTable:i!=="history",renderText:function(o,r){if(r.endTime&&r.startTime)return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S,{strong:!0,style:{fontSize:18,marginRight:5},children:Math.floor((r.endTime-r.startTime)/6e4)}),(0,e.jsx)("span",{style:{fontSize:12},children:"\u5206\u949F"})]})}},{title:"\u6211\u7684\u5F97\u5206",dataIndex:"examScore",hideInTable:!(n==="exam"&&i==="history"),renderText:function(o){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S,{type:"danger",strong:!0,style:{fontSize:18,marginRight:5},children:o}),(0,e.jsx)("span",{style:{fontSize:12},children:"\u5206"})]})}},{title:"\u64CD\u4F5C",dataIndex:"operate",renderText:function(o,r){return r.answerId&&n==="exam"?(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(r.projectId,"/exam-result/").concat(r.answerId))},children:"\u67E5\u770B\u7ED3\u679C"}):r.answerId&&n==="survey"?(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(r.projectId,"/").concat(r.answerId,"?pattern=readPretty"))},children:"\u67E5\u770B\u7B54\u6848"}):(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(r.projectId))},children:"\u8DF3\u8F6C"})}}];return(0,e.jsx)(k.ZP,{rowKey:"id",params:{type:n},request:function(){var s=(0,O.Z)((0,H.Z)().mark(function o(r){return(0,H.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",i==="todo"?B.hi.listUserTask(r):B.hi.listHistoryTask(r));case 1:case"end":return v.stop()}},o)}));return function(o){return s.apply(this,arguments)}}(),bordered:!0,columns:c,search:!1,toolbar:{}})};function V(){var u=[{key:"exam",label:"\u6211\u7684\u8003\u8BD5",children:(0,e.jsx)(h,{type:"todo",mode:"exam"})},{key:"survey",label:"\u6211\u7684\u95EE\u5377",children:(0,e.jsx)(h,{type:"todo",mode:"survey"})},{key:"surveyHistory",label:"\u95EE\u5377\u8BB0\u5F55",children:(0,e.jsx)(h,{type:"history",mode:"survey"})},{key:"examHistory",label:"\u8003\u8BD5\u8BB0\u5F55",children:(0,e.jsx)(h,{type:"history",mode:"exam"})}];return(0,e.jsx)(g.Z,{style:{width:"100%",marginBottom:24},children:(0,e.jsx)(J.Z,{items:u})})}var X=[{title:"\u521B\u5EFA\u95EE\u5377",href:"/survey/new?mode=survey"},{title:"\u521B\u5EFA\u8003\u8BD5",href:"/survey/new?mode=exam"}];function Q(){var u=new Date,a=u.getHours();return a<6?"\u51CC\u6668\u597D":a<9?"\u65E9\u4E0A\u597D":a<12?"\u4E0A\u5348\u597D":a<14?"\u4E2D\u5348\u597D":a<17?"\u4E0B\u5348\u597D":a<19?"\u508D\u665A\u597D":a<22?"\u665A\u4E0A\u597D":"\u591C\u91CC\u597D"}var b=function(a){var n=a.currentUser,i=n&&Object.keys(n).length;return i?(0,e.jsxs)("div",{className:l().pageHeaderContent,children:[(0,e.jsx)("div",{className:l().avatar,children:(0,e.jsx)(I.C,{size:"large",src:n.avatar})}),(0,e.jsxs)("div",{className:l().content,children:[(0,e.jsxs)("div",{className:l().contentTitle,children:[Q(),"\uFF0C",n.name,"\uFF0C\u795D\u4F60\u5F00\u5FC3\u6BCF\u4E00\u5929\uFF01"]}),(0,e.jsx)("div",{children:n.group})]}),(0,e.jsx)(w,{})]}):(0,e.jsx)(Y.Z,{avatar:!0,paragraph:{rows:1},active:!0})},w=function(){var a=(0,F.a)(),n=a.userOverview;return(0,e.jsxs)("div",{className:l().extraContent,children:[(0,e.jsx)("div",{className:l().statItem,children:(0,e.jsx)(C.Z,{title:"\u95EE\u5377\u6570",value:n==null?void 0:n.surveyCount})}),(0,e.jsx)("div",{className:l().statItem,children:(0,e.jsx)(C.Z,{title:"\u8003\u8BD5\u6570",value:n==null?void 0:n.examCount})})]})},ve=void 0==="1",q=function(){var a=(0,F.a)(),n=a.user,i=(0,E.useState)(function(){return!localStorage.getItem("welcome")}),c=(0,N.Z)(i,2),s=c[0],o=c[1],r={},f=r.loading,v=r.data,ce=v===void 0?[]:v,me=function(d){var te=d.template.split(/@\{([^{}]*)\}/gi).map(function(m){return d[m]?(0,e.jsx)("a",{href:d[m].link,children:d[m].name},d[m].name):m});return(0,e.jsx)(p.ZP.Item,{children:(0,e.jsx)(p.ZP.Item.Meta,{avatar:(0,e.jsx)(I.C,{src:d.user.avatar}),title:(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{className:l().username,children:d.user.name}),"\xA0",(0,e.jsx)("span",{className:l().event,children:te})]}),description:(0,e.jsx)("span",{className:l().datetime,title:d.updatedAt,children:L()(d.updatedAt).fromNow()})})},d.id)};return(0,e.jsx)(D._z,{className:l().container,content:(0,e.jsx)(b,{currentUser:{avatar:"/api/public/preview/".concat(n==null?void 0:n.avatar),name:n==null?void 0:n.name,userid:n==null?void 0:n.userId,email:n==null?void 0:n.email,signature:n==null?void 0:n.profile,group:n==null?void 0:n.deptName}}),children:(0,e.jsxs)(A.Z,{gutter:24,children:[(0,e.jsx)(T.Z,{xl:16,lg:24,md:24,sm:24,xs:24,children:(0,e.jsx)(V,{})}),a.hasPermission("project:create")&&(0,e.jsx)(T.Z,{xl:8,lg:24,md:24,sm:24,xs:24,children:(0,e.jsx)(g.Z,{style:{marginBottom:24},title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",bordered:!1,bodyStyle:{padding:0},children:(0,e.jsx)(R,{onAdd:function(){},links:X,linkElement:M.rU})})})]})})},_=(0,G.Pi)(q)}}]);
